{"version":3,"sources":["js/Http.js","js/index.js"],"names":["Http","constructor","uri","xhr","XMLHttpRequest","serialize","obj","qs","prop","encodeURIComponent","join","get","Promise","resolve","reject","open","addEventListener","status","statusText","response","error","send","post","data","setRequestHeader","delete","id","_default","exports","default","_Http","_interopRequireDefault","require","__esModule","container","document","querySelector","total","addProductForm","http","Row","product","price","render","arr","elems","map","e","totalCost","reduce","prev","curr","Number","innerHTML","loadAndRender","console","log","JSON","parse","alert","preventDefault","target","elements","value","stringify","getAttribute"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..\\src","sourcesContent":["class Http {\r\n  constructor(uri) {\r\n    this.uri = uri;\r\n    this.xhr = new XMLHttpRequest();\r\n  }\r\n  static serialize(obj) {\r\n    let qs = [];\r\n    for (let prop in obj) {\r\n      qs = [\r\n        ...qs,\r\n        `${encodeURIComponent(prop)}=${encodeURIComponent(obj[prop])}`,\r\n      ];\r\n    }\r\n\r\n    return qs.join(\"&\");\r\n  }\r\n  get(qs) {\r\n    return new Promise((resolve, reject) => {\r\n      this.xhr.open(\"GET\", `${this.uri}/?${Http.serialize(qs)}`, true);\r\n      this.xhr.addEventListener(\"load\", function () {\r\n        resolve({ status: this.statusText, response: this.response });\r\n      });\r\n      this.xhr.addEventListener(\"error\", (error) => reject(error));\r\n      this.xhr.send();\r\n    });\r\n  }\r\n  post(data) {\r\n    return new Promise((resolve, reject) => {\r\n      this.xhr.addEventListener(\"load\", function () {\r\n        resolve({ status: this.statusText, response: this.response });\r\n      });\r\n      this.xhr.addEventListener(\"error\", (error) => reject(error));\r\n      this.xhr.open(\"POST\", this.uri, true);\r\n      this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n      this.xhr.send(data);\r\n    });\r\n  }\r\n  delete(id) {\r\n    return new Promise((resolve, reject) => {\r\n      this.xhr.addEventListener(\"load\", function () {\r\n        resolve({ status: this.statusText });\r\n      });\r\n      this.xhr.addEventListener(\"error\", (error) => reject(error));\r\n      this.xhr.open(\"DELETE\", `${this.uri}/${id}`, true);\r\n      this.xhr.send();\r\n    });\r\n  }\r\n}\r\n\r\nexport default Http;\r\n","import Http from \"./Http\";\nconst container = document.querySelector(\".list\");\nconst total = document.querySelector(\".total\");\nconst addProductForm = document.querySelector(\"form[name=add-product]\");\nconst http = new Http(\"http://localhost:3000/products\");\n\nconst Row = ({ product, price, id }) =>\n  `<div class=\"product\">\n    <span class=\"prod-name\">${product}</span>\n    <span class=\"prod-cost\">$${price}</span>\n    <div class=\"delete-btn\"><a href=\"#\" name=\"delete-btn\" data-id=\"${id}\">X</a></div>\n  </div>`;\n\nconst render = function (arr) {\n  const elems = arr.map((e) => Row(e));\n  const totalCost = arr.reduce((prev, curr) => prev + Number(curr.price), 0);\n\n  container.innerHTML = elems.join(\"\");\n  total.innerHTML = Row({ product: \"TOTAL\", price: totalCost });\n};\n\n// const getData = (uri) =>\n//   new Promise((resolve, reject) => {\n//     const xhr = new XMLHttpRequest();\n//     xhr.addEventListener(\"load\", function () {\n//       resolve(JSON.parse(this.response));\n//     });\n//     xhr.addEventListener(\"error\", () => reject());\n//     xhr.open(\"GET\", uri);\n//     xhr.send();\n//   });\n\nasync function loadAndRender() {\n  try {\n    const { status, response } = await http.get();\n    console.log(status);\n    render(JSON.parse(response));\n  } catch {\n    alert(\"There was an error talking to the server!\");\n  }\n}\n\nloadAndRender();\n\n//add product and reload\naddProductForm.addEventListener(\"submit\", async function (e) {\n  e.preventDefault();\n  let product = e.target.elements.product;\n  let price = e.target.elements.price;\n  console.log(product.value, price.value);\n  try {\n    if (product.value !== \"\" && price.value !== 0) {\n      await http.post(\n        JSON.stringify({ product: product.value, price: Number(price.value) })\n      );\n      loadAndRender();\n    }\n  } catch (error) {\n    alert(`There was an error storing data: ${error}`);\n  } finally {\n    product.value = \"\";\n    price.value = \"\";\n  }\n});\n\ncontainer.addEventListener(\"click\", async function (e) {\n  e.preventDefault();\n  if (e.target.getAttribute(\"name\") === \"delete-btn\") {\n    let id = e.target.getAttribute(\"data-id\");\n    try {\n      await http.delete(id);\n      loadAndRender();\n    } catch (error) {\n      alert(`Error in deleting the product:${error} `);\n    }\n  }\n});\n"]}